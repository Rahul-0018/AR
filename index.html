<!DOCTYPE html>
<html>
  <head>
    <title>AR.js Astronaut with Logs (Rear Camera)</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.2.1/aframe/build/aframe-ar.js"></script>
    <style>
      body { margin: 0; overflow: hidden; }
      #logBox {
        position: fixed;
        top: 10px;
        left: 10px;
        background: rgba(0,0,0,0.7);
        color: #0f0;
        padding: 10px;
        font-family: monospace;
        font-size: 14px;
        max-width: 90%;
        max-height: 50%;
        overflow-y: auto;
        z-index: 9999;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <div id="logBox">📋 Logs:<br></div>

    <a-scene
      embedded
      vr-mode-ui="enabled: false"
      arjs="sourceType: webcam; facingMode: environment; debugUIEnabled: false;">
      
      <!-- Camera -->
      <a-entity camera></a-entity>

      <!-- Astronaut Model -->
      <a-entity id="astronaut"
        gltf-model="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Astronaut/glTF/Astronaut.gltf"
        scale="0.75 0.75 0.75"
        position="0 0 -1"
        rotation="0 180 0">
      </a-entity>
    </a-scene>

    <script>
      const logBox = document.getElementById("logBox");
      function addLog(msg) {
        console.log(msg);
        logBox.innerHTML += msg + "<br>";
        logBox.scrollTop = logBox.scrollHeight;
      }

      const astronaut = document.getElementById("astronaut");

      addLog("🚀 App started, requesting REAR camera...");

      // Model events
      astronaut.addEventListener("model-loaded", () =>
        addLog("✅ Model loaded (Astronaut) & placed 1m in front of camera")
      );
      astronaut.addEventListener("model-error", e =>
        addLog("❌ Model failed: " + JSON.stringify(e.detail))
      );

      // Tap log
      window.addEventListener("click", () => {
        const pos = astronaut.getAttribute("position");
        addLog("👆 Tap detected. Astronaut at: " + JSON.stringify(pos));
      });
    </script>
  </body>
</html>
